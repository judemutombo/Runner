cmake_minimum_required(VERSION 3.10)
project(server VERSION 1.0)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED True)

include_directories(${CMAKE_SOURCE_DIR}/include)
file(GLOB SOURCES "./*.cpp" "src/*.cpp" "src/**/*.cpp")

file(GLOB NLOHMANN "externals/nlohmann")
include_directories(${NLOHMANN})
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/../Signal)
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/../Network/include)

add_subdirectory(${CMAKE_SOURCE_DIR}/../Network binary_dir)

add_executable(${PROJECT_NAME} ${SOURCES})

target_link_libraries(${PROJECT_NAME} netLib)



set_target_properties(server PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_SOURCE_DIR}/"
)
if(UNIX)
    target_link_libraries(server PUBLIC pthread)
endif()

if(WIN32)
    target_link_libraries(server ws2_32)
endif()